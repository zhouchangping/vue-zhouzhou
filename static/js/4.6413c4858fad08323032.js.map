{"version":3,"sources":["webpack:///src/components/animate.vue","webpack:///./src/components/animate.vue?063a","webpack:///./src/components/animate.vue","webpack:///./src/common/js/animate.js"],"names":["components_animate","div","selectortype_template_index_0_src_components_animate","render","this","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","id","_v","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","Animator","duration","progress","easing","p","AnimationQueue","animators","prototype","start","finished","startTime","Date","now","self","requestAnimationFrame","step","next","append","args","slice","call","arguments","push","apply","flush","length","play","animator","shift","tween","linear","t","b","c","d","easeIn","strongEaseIn","strongEaseOut","sineaseIn","sineaseOut","Animates","dom","startPos","endPos","propertyName","getBoundingClientRect","timeId","setInterval","clearInterval","updata","pos","style","Animate","module","exports"],"mappings":"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","file":"static/js/4.6413c4858fad08323032.js","sourcesContent":["<template>\r\n  <div class=\"page-contain\">\r\n    <div id=\"block\">click me</div>\r\n    <div id=\"div\">move</div>\r\n  </div>\r\n</template>\r\n<script>\r\n      'use strict'\r\n  import animate from '../common/js/animate.js';\r\n  export default {\r\n    data() {\r\n      return {\r\n      }\r\n    },\r\n    methods: {\r\n    },\r\n    created() {\r\n    },\r\n    mounted() {\r\n      var block = document.getElementById('block');\r\n      var div = document.getElementById('div');\r\n      // var a1 = new animate.Animator(1000, function(p) { \r\n      // var tx = 100 * p;\r\n      //   block.style.transform = \"translateX(\" + tx + \"px)\"; \r\n      // });\r\n      // var a2 = new animate.Animator(1000, function(p) { \r\n      //   var ty = 100 * p;\r\n      //   block.style.transform = \"translate(100px,\" + ty + \"px)\"; \r\n      // });\r\n      // var a3 = new animate.Animator(1000, function(p) { \r\n      //   var tx = 100 * p;\r\n      //   block.style.transform = \"translate(\" + (100 - tx) + \"px,\" + \"100px\"; \r\n      // });\r\n      // var a4 = new animate.Animator(1000, function(p) { \r\n      //   var ty = 100 * p;\r\n      //   block.style.transform = \"translate(\"+\"0px,\" + (100-ty) + \"px\"; \r\n      // });\r\n      // block.addEventListener(\"click\", function() { \r\n      //   a1.start(function() { \r\n      //     a2.start(function () {\r\n      //       a3.start(function () {\r\n      //         a4.start();\r\n      //       });\r\n      //     });\r\n      //   }); \r\n      // });\r\n\r\n      // var a1 = new animate.Animator(1414, function(p) {\r\n      //   var ty = 200 * p * p;\r\n      //   block.style.transform = \"translateY(\" + ty + \"px)\";\r\n      // });\r\n      // var a2 = new animate.Animator(1414, function(p) {\r\n      //   var ty = 200 - 200 * p * (2 - p);\r\n      //   block.style.transform = \"translateY(\" + ty + \"px)\";\r\n      // });\r\n\r\n      // block.addEventListener(\"click\", function() {\r\n      //   var AnimationQueue = new animate.AnimationQueue();\r\n      //   AnimationQueue.append(a1, a2, function b() { AnimationQueue.append(a1, a2, b); });\r\n      //   AnimationQueue.flush();\r\n      // });\r\n\r\n      // block.addEventListener(\"click\", function() {\r\n      //   var AnimationQueue = new animate.AnimationQueue();\r\n      //     function foo() {  //  阻尼函数\r\n      //       a2.duration *= 0.7;\r\n      //       if (a2.duration <= 0.0001) {\r\n      //           AnimationQueue.animators.length = 0;\r\n      //       }\r\n      //   }\r\n      //   AnimationQueue.append(a1, foo, a2, function b() { \r\n      //     a1.duration *= 0.75;\r\n      //     AnimationQueue.append(a1, foo, a2, b);\r\n      //   });\r\n      //   AnimationQueue.flush();\r\n      // });\r\n\r\n      var div = document.getElementById(\"div\");\r\n      block.addEventListener(\"click\", function () {\r\n        var animates = new animate.Animates(div);\r\n        animates.start(\"left\", 100, 1000, \"strongEaseOut\");\r\n      },false);\r\n      \r\n    },\r\n    components: {\r\n    }\r\n  }\r\n</script>\r\n<style scoped>\r\n#block {\r\n  position: absolute;\r\n  top: 2rem;\r\n  left: 1rem;\r\n  background: #32af50;\r\n  width: 100px;\r\n  height: 100px;\r\n  color: #fff;\r\n  font-size: 18px;\r\n  text-align: center;\r\n  border-radius: 50px;\r\n  line-height: 100px;\r\n}\r\n\r\n#div {\r\n  position: absolute;\r\n  top: 5rem;\r\n  left: 1rem;\r\n  background: #32af50;\r\n  width: 100px;\r\n  height: 100px;\r\n  color: #fff;\r\n  font-size: 18px;\r\n  text-align: center;\r\n  border-radius: 50px;\r\n  line-height: 100px;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/animate.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-contain\"},[_c('div',{attrs:{\"id\":\"block\"}},[_vm._v(\"click me\")]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"div\"}},[_vm._v(\"move\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1fe6bd50\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/animate.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1fe6bd50\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./animate.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./animate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./animate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1fe6bd50\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./animate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1fe6bd50\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/animate.vue\n// module id = null\n// module chunks = ","    /**\r\n     * 动画类\r\n     *\r\n    */\r\n    function Animator(duration, progress, easing) {     \r\n        this.duration = duration;\r\n        this.progress = progress;\r\n        this.easing = easing || function(p) { return p };\r\n    };\r\n\r\n    Animator.prototype = {\r\n        start: function(finished) {\r\n            var startTime = Date.now();\r\n            var duration = this.duration,\r\n                self = this;\r\n            requestAnimationFrame(function step() {\r\n                var p = (Date.now() - startTime) / duration;\r\n                var next = true;\r\n                if (p < 1.0) {\r\n                    self.progress(self.easing(p), p);\r\n                } else {\r\n                    if (typeof finished === \"function\") {\r\n                        next = finished() === false; // 再执行finished\r\n                    } else {\r\n                        next = finished === false;\r\n                    }\r\n                    if (!next) {\r\n                        self.progress(self.easing(1.0), 1.0);\r\n                    } else {\r\n                        startTime += duration;\r\n                        self.progress(self.easing(p), p);\r\n                    }\r\n                }\r\n                if (next) requestAnimationFrame(step);\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 动画队列类\r\n     *\r\n    */\r\n    function AnimationQueue(animators) {\r\n        this.animators = animators || [];\r\n    };\r\n    AnimationQueue.prototype = {\r\n        append: function() {\r\n            var args = [].slice.call(arguments);\r\n            this.animators.push.apply(this.animators, args);\r\n        },\r\n        flush: function() {\r\n            if (this.animators.length) {\r\n                var self = this;\r\n\r\n                function play() {\r\n                    var animator = self.animators.shift();\r\n                    if (animator instanceof Animator) {\r\n                        animator.start(function() {\r\n                            if (self.animators.length) {\r\n                                play();\r\n                            }\r\n                        });\r\n                    } else {\r\n                        animator.apply(self); // 用self去执行function b() {},继续追加\r\n                        if (self.animators.length) {\r\n                            play();\r\n                        }\r\n                    }\r\n                }\r\n                play();\r\n            }\r\n        }\r\n    };\r\n\r\n    var tween = { // t已消耗时间， b原始位置，c目标位置，d持续时间\r\n     linear: function (t, b, c, d) {\r\n         return c * t / d + b;\r\n     },\r\n     easeIn: function (t, b, c, d) {\r\n         return c * (t /= d) * t + b;\r\n     },\r\n     strongEaseIn: function (t, b, c, d) {\r\n         return c * (t /= d) * t * t * t * t + b;\r\n     },\r\n     strongEaseOut: function (t, b, c, d) {\r\n         return c * (( t = t / d -1) * t * t * t * t + 1) + b;\r\n     },\r\n     sineaseIn: function (t, b, c, d) {\r\n         return c * (t /= d) * t * t + b;\r\n     },\r\n     sineaseOut: function (t, b, c, d) {\r\n         return c * ((t = t / d -1 ) * t * t + 1) + b;\r\n     }\r\n    };\r\n\r\n    var Animates = function (dom) {\r\n     this.dom = dom;\r\n     this.startTime = 0;\r\n     this.startPos = 0;\r\n     this.endPos = 0;\r\n     this.propertyName = null; // dom节点需要被改变的css属性名\r\n     this.easing = null;\r\n     this.duration = null;\r\n    }\r\n\r\n    Animates.prototype.start = function (propertyName, endPos, duration, easing) {\r\n     this.startTime = +new Date() // 动画启动时间\r\n     this.startPos = this.dom.getBoundingClientRect()[propertyName]; // 节点初始位置\r\n     this.propertyName = propertyName;\r\n     this.endPos = endPos;\r\n     this.duration = duration;\r\n     this.easing = tween[easing]; // 缓动动画\r\n\r\n     var self = this;\r\n     var timeId = setInterval(function () {\r\n         if (self.step() === false) {\r\n             clearInterval(timeId);\r\n         }\r\n     }, 19);\r\n    }\r\n\r\n    Animates.prototype.step = function () {\r\n     var t = +new Date(); // 取得当前时间\r\n     if (t >= this.startTime + this.duration) {\r\n         this.updata(this.endPos);\r\n         return false;\r\n     }\r\n     var pos = this.easing(t - this.startTime, this.startPos, this.endPos - this.startPos, this.duration);\r\n     this.updata(pos); // 更新小球的css属性\r\n    }\r\n\r\n    Animates.prototype.updata = function (pos) {\r\n     this.dom.style[this.propertyName] = pos + \"px\";\r\n    };\r\n\r\nvar Animate = {\r\n    AnimationQueue: AnimationQueue,\r\n    Animator: Animator,\r\n    Animates: Animates\r\n}\r\n\r\nmodule.exports = Animate;\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/animate.js"],"sourceRoot":""}